# 🎉 三板块网站改版 - 最终部署指南

## ✅ 改版完成状态

**所有文件已创建完毕！**

- ✅ 后端文件：7个
- ✅ 前端文件：4个  
- ✅ 文档文件：3个
- ✅ 总计：14个文件

---

## 📦 文件清单

### 核心程序文件（11个）

**后端（7个）：**
1. `database.js` - 数据库（支持category字段）
2. `conferences.js` - 会议数据（29场）
3. `rss-manager.js` - RSS管理（支持分类）
4. `fetcher.js` - 文章抓取（标记分类）
5. `server.js` - 服务器（会议API）
6. `migrate-category.js` - 数据迁移脚本
7. `update-sources.js` - 来源更新

**前端（4个）：**
8. `public/index.html` - 三板块首页
9. `public/app.js` - 前端逻辑
10. `public/admin.html` - 后台管理
11. `public/styles.css` - 样式表

### 文档文件（3个）
12. `AI行业会议-2026年度计划.md`
13. `完整改版部署指南.md`
14. `三板块改版说明.md`

---

## 🚀 部署步骤（3种方法）

### 方法1：完整替换（推荐，最快）

**步骤：**

1. **下载压缩包**
   - `wechat-rss-three-sections-complete.tar.gz`

2. **解压到本地**
   ```bash
   tar -xzf wechat-rss-three-sections-complete.tar.gz
   ```

3. **访问GitHub仓库**
   - https://github.com/leixingti/wechat-rss-aggregator

4. **删除所有文件**（除了 .gitignore）
   - 点击每个文件 → 删除
   - 或使用Git命令批量删除

5. **上传解压后的所有文件**
   - 拖拽整个文件夹上传
   - 或逐个上传

6. **提交并等待Railway部署**
   - 预计3-5分钟

---

### 方法2：逐个文件替换（稳妥）

**按以下顺序上传/替换：**

**第一批（后端核心）：**
1. `database.js`
2. `conferences.js`
3. `rss-manager.js`

**第二批（后端功能）：**
4. `fetcher.js`
5. `server.js`
6. `migrate-category.js`

**第三批（前端）：**
7. `public/index.html`
8. `public/app.js`
9. `public/admin.html`
10. `public/styles.css`

**提交后等待部署**

---

### 方法3：使用Git命令（高级）

```bash
# 克隆仓库
git clone https://github.com/leixingti/wechat-rss-aggregator.git
cd wechat-rss-aggregator

# 解压改版文件到本地
tar -xzf wechat-rss-three-sections-complete.tar.gz

# 复制所有文件（覆盖）
cp -r wechat-rss-aggregator-final/* .

# 提交
git add .
git commit -m "三板块改版完成"
git push

# Railway会自动部署
```

---

## ✅ 部署后验证

### 1. 检查Railway日志

访问：Railway → Deployments → View Logs

**应该看到：**
```
✅ 数据库连接成功
✅ 数据库表已就绪
🔄 添加category字段...
✅ category字段已添加
🚀 服务器运行在 http://localhost:3000
```

### 2. 访问前端

访问：`https://您的域名.railway.app`

**检查项：**
- ✅ 看到三个Tab：AI行业新闻、IT行业动态、AI行业会议
- ✅ 点击"AI行业新闻"能看到文章
- ✅ 点击"AI行业会议"能看到29场会议
- ✅ 文章按"今天、昨天、本周、更早"分组
- ✅ 统计数字正确显示

### 3. 测试会议功能

**点击任意会议卡片的"📅 添加到日历"：**
- ✅ 下载了.ics文件
- ✅ 可以导入到Google日历/Outlook

### 4. 测试后台管理

访问：`https://您的域名.railway.app/admin.html`

**检查项：**
- ✅ 登录（密码：admin123）
- ✅ 看到RSS源列表
- ✅ 每个源显示分类标签（蓝色=AI / 绿色=IT）
- ✅ 点击"编辑"能选择分类
- ✅ 点击"更新来源名称"按钮正常

---

## 🔧 部署后配置

### 1. 修改默认密码

1. 登录后台
2. 点击"修改密码"
3. 输入新密码（至少6位）
4. 保存

### 2. 运行数据迁移（如果文章分类不正确）

**方法A：通过Railway Shell**
```bash
# Railway → Deployments → Shell
node migrate-category.js
```

**方法B：通过后台按钮**
- 后台已有"更新来源名称"按钮
- 会自动更新文章分类

### 3. 添加IT行业RSS源

1. 登录后台
2. 点击"+ 添加RSS源"
3. 填写：
   - 名称：例如"36氪"
   - RSS链接：IT类公众号RSS
   - **分类：选择"IT行业动态"**
4. 保存

### 4. 调整现有RSS源分类（如需要）

1. 后台点击某个RSS源的"编辑"
2. 修改分类：AI行业新闻 / IT行业动态
3. 保存
4. 点击"更新来源名称"更新所有文章

---

## 🎯 功能说明

### 三板块功能

**1. AI行业新闻**
- 显示所有分类为"ai_news"的文章
- 当前18个RSS源都在这里
- 按日期分组显示

**2. IT行业动态**  
- 显示所有分类为"it_news"的文章
- 目前为空，需在后台添加IT类RSS源
- 同样按日期分组显示

**3. AI行业会议**
- 显示29场2026年AI会议
- 按月份分组
- 可下载.ics日历文件
- 会议数据写死在代码中（不需要后台管理）

### 后台管理功能

**RSS源管理：**
- 添加/编辑/删除RSS源
- 选择分类（AI/IT）
- 启用/禁用RSS源
- 显示分类标签

**其他功能：**
- 修改登录密码
- 更新文章来源名称
- 返回首页

---

## ❓ 常见问题

### Q1: 部署后只看到AI行业新闻？

**A:** 正常！因为：
- 所有18个RSS源默认都是"AI行业新闻"
- "IT行业动态"需要您手动添加RSS源

### Q2: 点击"AI行业会议"没有数据？

**A:** 检查：
1. Railway日志是否有错误
2. 浏览器控制台是否有错误
3. 访问 `https://您的域名.railway.app/api/conferences`
   - 应该返回29场会议的JSON数据

### Q3: 文章的分类不对？

**A:** 运行数据迁移：
```bash
# Railway Shell
node migrate-category.js
```

或点击后台的"更新来源名称"按钮

### Q4: 会议日历下载失败？

**A:** 检查：
1. server.js 是否已更新
2. conferences.js 是否存在
3. Railway日志查看错误信息

### Q5: 字体太小？

**A:** styles.css已设置 `font-size: 24px`（增加50%）
- 如果还小，可以在styles.css中修改

---

## 📊 预期效果

### 前端展示

**首页：**
- 三个Tab清晰可见
- 默认显示"AI行业新闻"
- 统计数字实时更新

**文章列表：**
- 按日期分组（今天/昨天/本周/更早）
- 每页100篇文章
- 分页导航正常

**会议列表：**
- 按月份分组（1月-12月）
- 29场会议全部显示
- 日历下载功能正常

### 后台管理

**RSS源列表：**
- 显示18个默认RSS源
- 每个源有分类标签（蓝色）
- 可编辑修改分类

---

## 🆘 需要帮助？

如果遇到问题：

1. **查看Railway日志**
   - Railway → Deployments → View Logs
   - 复制错误信息

2. **检查浏览器控制台**
   - F12 → Console
   - 查看JavaScript错误

3. **告诉我具体情况**
   - 哪个步骤出错
   - 错误信息是什么
   - 我会帮您诊断

---

## 🎉 部署成功后

**您将拥有：**
- ✅ 三板块展示的AI行业资讯网站
- ✅ 29场2026年AI会议信息
- ✅ 会议日历导出功能
- ✅ RSS源分类管理
- ✅ 自动文章抓取（每15分钟）
- ✅ 响应式设计
- ✅ 搜索功能

**恭喜您完成改版！** 🎊

---

**现在下载压缩包开始部署吧！** 🚀
